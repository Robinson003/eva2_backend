{% extends 'ventas/base.html' %}
{% load static %}
{% load utils %}

{% block title %}{{ title }}{% endblock %}

{% block content %}
<h1 class="text-2xl font-bold mb-4">{{ title }}</h1>

<div class="mb-4">
    <a href="{% url add_url %}" 
       class="bg-green-500 hover:bg-green-600 text-white font-medium px-4 py-2 rounded shadow-md inline-flex items-center gap-2 transition duration-200 ease-in-out transform hover:-translate-y-1 hover:shadow-lg">
        <span class="text-white text-lg font-bold">+</span>
        Nuevo {{ model_name }}
    </a>
</div>

<div class="overflow-x-auto">
    <table class="min-w-full bg-white border border-gray-200">
        <thead class="bg-gray-100">
            <tr>
                {% for col in columns %}
                <th class="text-center px-4 py-2 border-b border-gray-200 {% if forloop.last %}w-[34%]{% else %}w-[22%]{% endif %}">
                    {{ col }}
                </th>
                {% endfor %}
                <th class="px-4 py-2 border-b border-gray-200 text-center w-[34%]">Acciones</th>
            </tr>
        </thead>
        <tbody>
            {% for object in object_list %}
            <tr class="hover:bg-green-50 hover:text-green-600 transition-colors duration-300">
                {% for field in fields %}
                <td class="px-4 py-2 border-b border-gray-200 {% if forloop.first %}text-left{% elif forloop.counter == 2 %}text-center{% else %}text-center{% endif %}">
                    {% if field in numeric_fields %}
                        {{ object|get_attr:field|floatformat:0 }}
                    {% else %}
                        {{ object|get_attr:field }}
                    {% endif %}
                </td>
                {% endfor %}
                <td class="px-4 py-2 border-b border-gray-200 text-center flex justify-center gap-2">
                    <!-- Botón Editar -->
                    <a href="{% url edit_url object.pk %}" 
                       class="bg-blue-500 text-white px-3 py-1 rounded hover:bg-blue-600 flex items-center gap-1">
                        <!-- Heroicons Pencil -->
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M11 4H4a1 1 0 00-1 1v16a1 1 0 001 1h16a1 1 0 001-1v-7M16.5 3.5l4 4L12 16l-4 1 1-4 8.5-8.5z" />
                        </svg>
                        Editar
                    </a>

                    <!-- Botón Eliminar -->
                    <a href="{% url delete_url object.pk %}" 
                       class="bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600 flex items-center gap-1">
                        <!-- Heroicons Trash -->
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5-4h4m-4 0a2 2 0 00-2 2v0a2 2 0 002 2h4a2 2 0 002-2v0a2 2 0 00-2-2m-4 0h4" />
                        </svg>
                        Eliminar
                    </a>
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="{{ fields|length|add:'1' }}" class="px-4 py-2 text-center text-gray-500">No hay datos disponibles</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}